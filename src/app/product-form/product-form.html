<div>
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">

        <!-- Name Field -->
        <label>Name</label>
        <input type="text" formControlName="name" />

        <div class="error" *ngIf="productForm.get('name')?.touched && productForm.get('name')?.invalid">
            <span *ngIf="productForm.get('name')?.errors?.['required']">
                Name is required
            </span>
            <span *ngIf="productForm.get('name')?.errors?.['minlength']">
                Minimum 3 characters required
            </span>
        </div>


        <!-- Description Field -->
        <label>Description</label>
        <textarea formControlName="description"></textarea>

        <div class="error" *ngIf="productForm.get('description')?.touched && productForm.get('description')?.invalid">
            <span *ngIf="productForm.get('description')?.errors?.['required']">
                Description is required
            </span>
            <span *ngIf="productForm.get('description')?.errors?.['minlength']">
                Minimum 10 characters required
            </span>
        </div>


        <!-- Price Field -->
        <label>Price</label>
        <input type="number" formControlName="price" />

        <div class="error" *ngIf="productForm.get('price')?.touched && productForm.get('price')?.invalid">
            <span *ngIf="productForm.get('price')?.errors?.['required']">
                Price is required
            </span>
            <span *ngIf="productForm.get('price')?.errors?.['min']">
                Price must be at least 50
            </span>
        </div>


        <!-- Category Field -->
        <label>Category</label>
        <input type="text" formControlName="category" />

        <div class="error" *ngIf="productForm.get('category')?.touched && productForm.get('category')?.invalid">
            Category is required
        </div>


        <!-- Image URL Field -->
        <label>Image URL</label>
        <input type="text" formControlName="imageUrl" />

        <div class="error" *ngIf="productForm.get('imageUrl')?.touched && productForm.get('imageUrl')?.invalid">
            <span *ngIf="productForm.get('imageUrl')?.errors?.['required']">
                Image URL is required
            </span>
            <span *ngIf="productForm.get('imageUrl')?.errors?.['pattern']">
                Must be a valid URL (http or https)
            </span>
        </div>

        <div *ngIf="productForm.get('imageUrl')?.valid">
            <img [src]="productForm.get('imageUrl')?.value" (error)="imageError = true" *ngIf="!imageError"
                [alt]="productForm.get('name')?.value" width="150" />
        </div>


        <!-- In Stock Field -->
        <label>
            <input type="checkbox" formControlName="inStock" />
            In Stock
        </label>


        <!-- Rating Field -->
        <label>Rating (0â€“5)</label>
        <input type="number" formControlName="rating" min="0" max="5" />

        <div class="error" *ngIf="productForm.get('rating')?.touched && productForm.get('rating')?.invalid">
            Rating must be between 0 and 5
        </div>


        <!-- Properties -->
        <h3>Properties</h3>
        <div formArrayName="properties">
            <div *ngFor="let prop of properties.controls; let i = index" [formGroupName]="i">

                <label>Color</label>
                <input type="text" formControlName="color" />

                <div class="error" *ngIf="prop.get('color')?.touched && prop.get('color')?.invalid">
                    Color is required
                </div>

                <label>Weight</label>
                <input type="text" formControlName="weight" />

                <div class="error" *ngIf="prop.get('weight')?.touched && prop.get('weight')?.invalid">
                    Weight is required
                </div>

                <button type="button" (click)="removeProperty(i)" [disabled]="properties.length === 1">Remove
                    Property</button>
            </div>
        </div>

        <button type="button" (click)="addProperty()">Add Property</button>

        <button type="submit" [disabled]="productForm.invalid">Create Product</button>

    </form>
</div>